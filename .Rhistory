pseudo_assem[i,] <- as.numeric(rosario_model[[random1[i]]][[random2[i]]][random3[i],])
}
null_overlap <- as.data.frame(combinations(n = length(rownames(pseudo_assem)),
r = 2, v = rownames(pseudo_assem)))
null_overlap$overlap_niche <- NA
for (i in 1:nrow(null_overlap)) {
ind1 <- null_overlap[i,1]
ind2 <- null_overlap[i,2]
if (method == "pianka") {
null_overlap[which(null_overlap[,1] == ind1 & null_overlap[,2] == ind2), 3] <- pianka_index(pseudo_assem[which(rownames(pseudo_assem) == ind1),], pseudo_assem[which(rownames(pseudo_assem) == ind2),])      }
if (method == "czekanowski") {
null_overlap[which(null_overlap[,1] == ind1 & null_overlap[,2] == ind2), 3] <- czekanowski_index(pseudo_assem[which(rownames(pseudo_assem) == ind1),], pseudo_assem[which(rownames(pseudo_assem) == ind2),])
}
}
niche_overlap_pseudo_assem[k] <- mean(null_overlap[,3])
}
method
mat <- ex1
niche_overlap_observed <- temp_overlap(mat, method)
niche_overlap_observed
purrr::rep_along(along = 1:10)
rosario_sample(mat)
rosario_sample(mat)
rosario_sample(mat)
temp_overlap(rosario_sample(mat), method)
purrr::rep_along(along = 1:10,  temp_overlap(rosario_sample(mat), method))
purrr::rep_along(along = 1:10,  temp_overlap(rosario_sample(mat), method))
purrr::map(1:10,
.f = temp_overlap(rosario_sample(mat), method))
temp_overlap(rosario_sample(mat), method)
temp_overlap(rosario_sample(mat), method)
temp_overlap(rosario_sample(mat), method)
temp_overlap(rosario_sample(mat), method)
temp_overlap(rosario_sample(mat), method)
temp_overlap(rosario_sample(mat), method)
temp_overlap(rosario_sample(mat), method)
purrr::map(1:10,
.f = temp_overlap(rosario_sample(mat), method) )
purrr::map_df(1:10,
.f = temp_overlap(rosario_sample(mat), method) )
purrr::map_dbl(1:10,
.f = temp_overlap(rosario_sample(mat), method) )
purrr::rep_along(1:10,
.f = temp_overlap(rosario_sample(mat), method) )
temp_overlap(rosario_sample(mat), method)
temp_overlap(rosario_sample(mat), method)
temp_overlap(rosario_sample(mat), method)
temp_overlap(rosario_sample(mat), method)
temp_overlap(rosario_sample(mat), method)
temp_overlap(rosario_sample(mat), method)
purrr::map(.x = 1:10,
f = temp_overlap(rosario_sample(mat), method) )
temp_overlap(rosario_sample(mat), method)
purrr::map(.x = 1:10,
.f = function(x) {temp_overlap(rosario_sample(mat), method)})
purrr::map_df(.x = 1:10,
.f = function(x) {temp_overlap(rosario_sample(mat), method)})
temp_overlap(rosario_sample(mat), method)}
purrr::map_df(.x = 1:10,
.f = function(x) {
df <- data.frame(temp_overlap(rosario_sample(mat), method))
df$iteration <- x
})
purrr::map(.x = 1:10,
.f = function(x) {
df <- data.frame(temp_overlap(rosario_sample(mat), method))
df$iteration <- x
})
purrr::map(.x = 1:10,
.f = function(x) {
df <- data.frame(temp_overlap(rosario_sample(mat), method))
df$iteration <- x
df
})
purrr::map_dfr(.x = 1:10,
.f = function(x) {
df <- data.frame(temp_overlap(rosario_sample(mat), method))
df$iteration <- x
df
})
purrr::map_df(.x = 1:10,
.f = function(x) {
df <- data.frame(temp_overlap(rosario_sample(mat), method))
df$iteration <- x
df
})
purrr::map_df(.x = 1:10,
.f = function(x) {
df <- data.frame(overlap <- temp_overlap(rosario_sample(mat), method))
df$method <- method
df$iteration <- x
df
})
purrr::map_df(.x = 1:10,
.f = function(x) {
df <- data.frame(overlap = temp_overlap(rosario_sample(mat), method))
df$method <- method
df$iteration <- x
df
})
purrr::map_df(.x = 1:10,
.f = function(x) {
df <- tibble::tibble(overlap = temp_overlap(rosario_sample(mat), method))
df$method <- method
df$iteration <- x
df
})
purrr::map_df(.x = 1:1000,
.f = function(x) {
df <- tibble::tibble(overlap = temp_overlap(rosario_sample(mat), method))
df$method <- method
df$iteration <- x
df
})
purrr::map_df(.x = 1:1000,.f = get_index(x))
get_index <- function(x) {
df <- tibble::tibble(overlap = temp_overlap(rosario_sample(mat), method))
df$method <- method
df$iteration <- x
df
}
purrr::map_df(.x = 1:1000,.f = get_index(x))
purrr::map_df(.x = 1:1000,.f = get_index)
purrr::map_df(.x = 1:1000,.f = get_index)
get_index <-
purrr::map_df(.x = 1:1000,.f = function(x) {
df <- tibble::tibble(overlap = temp_overlap(rosario_sample(mat), method))
df$method <- method
df$iteration <- x
df
})
purrr::map_df(.x = 1:1000,.f = function(x) {
df <- tibble::tibble(overlap = temp_overlap(rosario_sample(mat), method))
df$method <- method
df$iteration <- x
df
})
temp_overlap(rosario_sample(mat), method)
temp_overlap(rosario_sample(mat), method)
temp_overlap(rosario_sample(mat), method)
temp_overlap(rosario_sample(mat), method)
replicate(temp_overlap(rosario_sample(mat), method))
replicate(n = 100, expr = temp_overlap(rosario_sample(mat), method))
library(mcreplicate)
install.packages("mcreplicate")
temp_overlap(rosario_sample(mat), method)
temp_overlap(rosario_sample(mat), method)
temp_overlap(rosario_sample(mat), method)
temp_overlap(rosario_sample(mat), method)
f <- temp_overlap(rosario_sample(mat), method)
f
f
f <- function() temp_overlap(rosario_sample(mat), method)
f()
f()
f()
replicate(n = 100, expr = f())
replicate(n = 100, expr = f())
replicate(n = 100, expr = f())
# purrr::map_df(.x = 1:1000,.f = function(x) {
#   df <- tibble::tibble(overlap = temp_overlap(rosario_sample(mat), method))
#   df$method <- method
#   df$iteration <- x
#   df
# })
mcreplicate
# purrr::map_df(.x = 1:1000,.f = function(x) {
#   df <- tibble::tibble(overlap = temp_overlap(rosario_sample(mat), method))
#   df$method <- method
#   df$iteration <- x
#   df
# })
mc_replicate
# purrr::map_df(.x = 1:1000,.f = function(x) {
#   df <- tibble::tibble(overlap = temp_overlap(rosario_sample(mat), method))
#   df$method <- method
#   df$iteration <- x
#   df
# })
mcreplicate::mc_replicate(10, f())
f()
f()
# purrr::map_df(.x = 1:1000,.f = function(x) {
#   df <- tibble::tibble(overlap = temp_overlap(rosario_sample(mat), method))
#   df$method <- method
#   df$iteration <- x
#   df
# })
mcreplicate::mc_replicate(10, f())
rosario::temp_overlap()
temp_overlap
rosario_sample
rosario::rosario_sample
mat
f <- function() rosario::temp_overlap(rosario::rosario_sample(mat), method)
# purrr::map_df(.x = 1:1000,.f = function(x) {
#   df <- tibble::tibble(overlap = temp_overlap(rosario_sample(mat), method))
#   df$method <- method
#   df$iteration <- x
#   df
# })
mcreplicate::mc_replicate(10, f())
# purrr::map_df(.x = 1:1000,.f = function(x) {
#   df <- tibble::tibble(overlap = temp_overlap(rosario_sample(mat), method))
#   df$method <- method
#   df$iteration <- x
#   df
# })
mcreplicate::mc_replicate(1000, f())
# purrr::map_df(.x = 1:1000,.f = function(x) {
#   df <- tibble::tibble(overlap = temp_overlap(rosario_sample(mat), method))
#   df$method <- method
#   df$iteration <- x
#   df
# })
mcreplicate::mc_replicate(1000, f(), varlist = c("mat"))
f <- function() rosario::temp_overlap(rosario::rosario_sample(mat), method)
# purrr::map_df(.x = 1:1000,.f = function(x) {
#   df <- tibble::tibble(overlap = temp_overlap(rosario_sample(mat), method))
#   df$method <- method
#   df$iteration <- x
#   df
# })
mcreplicate::mc_replicate(1000, f(), varlist = c("mat"))
# purrr::map_df(.x = 1:1000,.f = function(x) {
#   df <- tibble::tibble(overlap = temp_overlap(rosario_sample(mat), method))
#   df$method <- method
#   df$iteration <- x
#   df
# })
mcreplicate::mc_replicate(1000, f(), varlist = c("f", "mat"))
# purrr::map_df(.x = 1:1000,.f = function(x) {
#   df <- tibble::tibble(overlap = temp_overlap(rosario_sample(mat), method))
#   df$method <- method
#   df$iteration <- x
#   df
# })
mcreplicate::mc_replicate(1000, f(), varlist = c("f", "ex1"))
# purrr::map_df(.x = 1:1000,.f = function(x) {
#   df <- tibble::tibble(overlap = temp_overlap(rosario_sample(mat), method))
#   df$method <- method
#   df$iteration <- x
#   df
# })
mcreplicate::mc_replicate(1000, f(), varlist = c("mat"))
# purrr::map_df(.x = 1:1000,.f = function(x) {
#   df <- tibble::tibble(overlap = temp_overlap(rosario_sample(mat), method))
#   df$method <- method
#   df$iteration <- x
#   df
# })
mcreplicate::mc_replicate(1000, f())
purrr::map(1:10, f())
purrr::map(1:10, f)
purrr::map(1:10, f() )
purrr::map(1:10, function(x) f() )
purrr::map(1:10, ]\(x) f() )
purrr::map(1:10, \(x) f() )
purrr::map(1:nsim, \(x) f() )
purrr::map_dbl(1:nsim, \(x) f(), .progress = TRUE )
purrr::map_df(1:nsim, \(x) f(), .progress = TRUE )
nsim = 100
niche_overlap_observed
res
results <- list(obs_overlap, niche_overlap_comm, p_value, niche_overlap_pseudo_assem)
use_package("purrr")
use_package("mcreplicate")
t.test
get_null_model <- function(mat, method, method, nsim = 100, parallel = TRUE) {
niche_overlap_observed <- temp_overlap(mat, method)
f <- function() rosario::temp_overlap(rosario::rosario_sample(mat), method)
if(parallel){
res <- mcreplicate::mc_replicate(1000, f())
} else {
res <- purrr::map(1:nsim, \(x) f(), .progress = TRUE )
}
#p_value <- stats::t.test(x = res, mu = niche_overlap_observed)
#results <- list(obs_overlap, niche_overlap_comm, p_value, niche_overlap_pseudo_assem)
#names(results) <- c("niche_overlap_ide", "observed_niche_overlap", "p_value", "null_niche_overlap")
return(res)
}
temp_overlap(ex1, method = "pianka")
get_null_model(ex1, method = "pianka", nsim = 10)
document()
document()
get_null_model(ex1)
get_null_model(ex1, method = "pianka")
get_null_model(ex1, method = "pianka")
get_null_model(ex1, method = "pianka", nsim = 1000)
get_null_model(ex1, method = "pianka", nsim = 1000, parallel = TRUE)
get_null_model(ex1, method = "pianka", nsim = 1000, parallel = TRUE)
?mcreplicate::mc_replicate
multiprocess
multiprocess
plan
furrr::plan
plan
future::plan
future::plan(multiprocess)
multiprocess
?future::plan
multiprocess
get_null_model(ex1, method = "pianka", nsim = 1000, parallel = TRUE)
get_null_model(ex1, method = "pianka", nsim = 200, parallel = FALSE)
get_null_model(ex1, method = "pianka", nsim = 200, parallel = FALSE)
get_null_model(ex1, method = "pianka", nsim = 200, parallel = TRUE)
get_null_model(ex1, method = "pianka", nsim = 200, parallel = TRUE)
furrr_options
furrr::furrr_options
furrr::furrr_options(globals = TRUE)
furrr::furrr_options(globals = TRUE)
get_null_model(ex1, method = "pianka", nsim = 200, parallel = TRUE)
environment()
environment()
get_null_model(ex1, method = "pianka", nsim = 200, parallel = TRUE)
environment()
get_null_model(ex1, method = "pianka", nsim = 200, parallel = TRUE)
get_null_model(ex1, method = "pianka", nsim = 200, parallel = TRUE)
get_null_model(ex1, method = "pianka", nsim = 200, parallel = FALSE)
get_null_model(ex1, method = "pianka", nsim = 1000, parallel = FALSE)
get_null_model(ex1, method = "pianka", nsim = 200, parallel = FALSE)
get_null_model(ex1, method = "pianka", nsim = 200, parallel = TRUE)
future_options
furrr::future_options
furrr::future_options
get_null_model(ex1, method = "pianka", nsim = 200, parallel = TRUE)
furrr_options
furrr::furrr_options
get_null_model(ex1, method = "pianka", nsim = 200, parallel = TRUE)
get_null_model(ex1, method = "pianka", nsim = 200, parallel = TRUE)
?furrr::furrr_options
get_null_model(ex1, method = "pianka", nsim = 200, parallel = TRUE)
furrr_options()
furrr:::furrr_options()
furrr:::furrr_options(globals = TRUE)
#res <- mcreplicate::mc_replicate(1000, f())
future::plan(strategy = "multisession")
f <- function() rosario::temp_overlap(rosario::rosario_sample(mat), method)
res <- furrr::future_map_dfr(1:nsim, \(x) f(), options = furrr::furrr_options(globals = TRUE))
res <- furrr::future_map_dfr(1:100, \(x) f(), options = furrr::furrr_options(globals = TRUE))
furrr::future_map_dfr(1:100, \(x) f())
furrr::future_map_dfr(1:100, \(x) f())
mat
f <- function() rosario::temp_overlap(rosario::rosario_sample(mat), method)
f()
f()
furrr::future_map_dfr(1:100, \(x) f())
f()
f <- function() rosario::temp_overlap(rosario::rosario_sample(mat), method)
res <- furrr::future_map_dfr(1:100, \(x) f())
f <- function() rosario::temp_overlap(rosario::rosario_sample(mat), method)
f()
get_null_model(ex1, method = "pianka", nsim = 200, parallel = TRUE)
?furrr::furrr_options
get_null_model(ex1, method = "pianka", nsim = 200, parallel = TRUE)
get_null_model(ex1, method = "pianka", nsim = 200, parallel = TRUE)
get_null_model(ex1, method = "pianka", nsim = 200, parallel = TRUE)
document()
rbinom
vec_permutation
m <- temp_overlap(ex(m)
m <- temp_overlap(ex1(m))
ex1(m)
ex1
temp_overlap(ex1)
get_null_model(ex1)
get_null_model(ex1, "pianka")
library(rosario)
ex1
ex1
ex1
data.frame(ex1)
as.matrix(ex1)
m
temp_overlap(ex1)
ex1
temp_overlap
ex1
temp_overlap
temp_overlap_matrix(ex1)
m <- temp_overlap_matrix(ex1)
temp_overlap_df(m)
m
m <- temp_overlap_matrix(ex1, method = "czekanowski")
m
ex1
rosario::rescale_matrix(ex1)
colSums(rosario::rescale_matrix(ex1))
rowsSums(rosario::rescale_matrix(ex1))
rowSums(rosario::rescale_matrix(ex1))
m < -rosario::rescale_matrix(ex1)
m <- rosario::rescale_matrix(ex1)
temp_overlap_matrix(m, method = "czekanowski")
m <- temp_overlap_matrix(m, method = "czekanowski")
m
temp_overlap_df(m)
m
ex1
get_null_model
temp_overlap_df(m)
get_null_model
rosario::rosario_sample(mat)
rosario::rosario_sample(m)
rosario::rosario_sample(m)
rosario::rosario_sample(ex1)
rosario::rosario_sample(ex1)
rosario::rosario_sample(ex1)
temp_overlap_df(m)
m
rosario::rosario_sample(ex1)
temp_overlap_df(rosario::rosario_sample(ex1))
rosario::rosario_sample(ex1)
temp_overlap_df(rosario::rosario_sample(ex1))
rosario::rosario_sample(ex1)
temp_overlap_df(temp_overlap(rosario::rosario_sample(ex1)))
temp_overlap(rosario::rosario_sample(ex1))
temp_overlap_df(temp_overlap_matrix(rosario::rosario_sample(ex1)))
temp_overlap_df(temp_overlap_matrix(rosario::rosario_sample(ex1)))
get_null_model(ex1, "pianka")
nm <- get_null_model(ex1, "pianka", nsim = 1000)
nm
nm$p_value
nm$null_niche_overlap
nm$null_niche_overlap %>%
ggplot() + geom_density()
library(tidyverse)
nm$null_niche_overlap %>%
ggplot() + geom_density()
nm
nm$null_niche_overlap
nm$null_niche_overlap %>%
ggplot() + geom_density(pianka)
nm$null_niche_overlap %>%
ggplot() + geom_density(aes(pianka))
nm$p_value
ex1
nm <- get_null_model(ex1, "pianka", nsim = 1000, parallel = TRUE)
nm
nm <- get_null_model(ex1, "pianka", nsim = 1000, parallel = FALSE)
nm
Ex24.288 <- read.csv("ex-288.csv", row.names=1, header= TRUE)
Ex24.288 <- read.csv("data-raw/rosario_sripts/Matrices/ex24-288.csv row.names=1, header= TRUE)
Ex24.288 <- read.csv("data-raw/rosario_sripts/Matrices/ex24-288.csv", row.names=1, header= TRUE)
head(Ex24.288)
dim(Ex24.288)
as.matrix(Ex24.288)
matrix(Ex24.288)
Ex24.288
as.matrix(Ex24.288)
Ex24.288 <- as.matrix(Ex24.288)
library(rosario)
rosario::get_null_model(Ex24.288, nsim = 10, method = "pianka")
rosario::get_null_model(Ex24.288, nsim = 100, method = "pianka")
nm <- rosario::get_null_model(Ex24.288, nsim = 1000, method = "pianka")
nm
Ex24.288
rosario::rosario(Ex24.288)
Ex24.288
rosario::rosario_sample(Ex24.288)
rosario::rosario(Ex24.288[1, ])
Ex24.288[1, ]
rosario::rosario(Ex24.288)
res
stats::rbinom(1, 1, 0.5)
stats::rbinom(1, 1, 0.5)
stats::rbinom(1, 1, 0.5)
stats::rbinom(1, 1, 0.5)
stats::rbinom(1, 1, 0.5)
stats::rbinom(1, 1, 0.5)
stats::rbinom(1, 1, 0.5)
stats::rbinom(1, 1, 0.5)
stats::rbinom(1, 1, 0.5)
stats::rbinom(1, 1, 0.5)
stats::rbinom(1, 1, 0.5)
stats::rbinom(1, 1, 0.5)
stats::rbinom(1, 1, 0.5)
rosario::rosario_sample(ex1)
ex1
rosario_sample(ex1)
rosario_sample(ex1)
rosario_sample(Ex24.288)
ex1
rosario_sample(Ex24.288)
ex1
m
temp_overlap(m, method = "pianka")
overlap_pianka[1:6, 1:6]
overlap_pianka
overlap_pianka
# measure the overlap matrix with Pianka's method
overlap_pianka <- temp_overlap(m, method = "pianka")
overlap_pianka
m_overlap <-
temp_overlap_matrix(m, method = "pianka")
m_overlap_df <- temp_overlap_df(m, method = "pianka")
m_overlap_df <- temp_overlap_df(m_overlap,)
m_overlap <- temp_overlap_matrix(m, method = "pianka")
m_overlap
temp_overlap_df(m_overlap)
m_overlap_df <- temp_overlap_df(m_overlap)
library(overlap)
install.packages("overlap")
data(kerinci)
kerinci
data(kerinci, "overlap")
data(kerinci, "overlap")
data
?data
library(remotes)
install_github("alrobles/rosario")
nm <- get_null_model(m, method = "pianka", nsim = 1000)
require("rosario")
